<!-- Expense Modal (Vintage Style) -->
<div id="expenseModal" class="hidden fixed inset-0 bg-gray-900/80 backdrop-blur-[2px] flex items-center justify-center z-[110] opacity-0 pointer-events-none modal">
    <div class="bg-[#FDF5E6] w-full max-w-[340px] rounded-lg shadow-[0_10px_40px_rgba(0,0,0,0.5)] overflow-hidden animate-pop-in relative mx-4 border-2 border-[#8B4513] ring-4 ring-[#F5DEB3]">
        
        <!-- Header Ribbon -->
        <div class="bg-[#C62828] px-4 py-3 flex justify-between items-center text-[#FFEBEE] border-b-2 border-[#B71C1C]">
            <h3 class="font-bold flex items-center gap-2 text-sm font-hand tracking-wide">
                <i class="fa-solid fa-circle-minus text-[#FFCDD2]"></i> บันทึกรายจ่าย
            </h3>
            <button onclick="hideModal('expenseModal')" class="text-[#FFCDD2] hover:text-white transition">
                <i class="fa-solid fa-times text-lg"></i>
            </button>
        </div>

        <form id="expenseForm" onsubmit="submitExpense(event)" class="p-6 space-y-4">
            <!-- Date Input -->
            <div>
                <label class="block text-xs font-bold text-[#5D4037] mb-1 font-hand">วันที่จ่าย</label>
                <input type="date" id="exp_date" class="w-full border-2 border-[#D7CCC8] bg-[#FFF8DC] rounded p-2 text-sm text-[#5D4037] focus:outline-none focus:border-[#C62828]" required>
            </div>

            <!-- Category -->
            <div>
                <label class="block text-xs font-bold text-[#5D4037] mb-1 font-hand">หมวดหมู่</label>
                <select id="exp_category" class="w-full border-2 border-[#D7CCC8] bg-[#FFF8DC] rounded p-2 text-sm text-[#5D4037] focus:outline-none focus:border-[#C62828]">
                    <option>ค่าแรงพนักงาน</option>
                    <option>ค่าไฟฟ้า</option>
                    <option>ค่าประปา</option>
                    <option>ค่าซ่อมบำรุง</option>
                    <option>ค่าเก็บขยะ</option>
                    <option>ค่าอุปกรณ์</option>
                    <option>ค่าใช้จ่ายอื่นๆ</option>
                </select>
            </div>

            <!-- Item -->
            <div>
                 <label class="block text-xs font-bold text-[#5D4037] mb-1 font-hand">รายการ</label>
                 <input type="text" id="exp_item" placeholder="ระบุรายการ..." class="w-full border-b-2 border-[#D7CCC8] bg-transparent p-1 text-sm text-[#5D4037] focus:outline-none focus:border-[#C62828]" required>
            </div>

            <!-- Amount -->
            <div class="bg-[#FFF8DC] p-2 rounded border border-[#D7CCC8] flex items-center justify-between">
                <span class="text-xs font-bold text-[#5D4037] font-hand">จำนวนเงิน</span>
                <input type="number" id="exp_amount" placeholder="0.00" class="w-24 bg-transparent text-right text-xl font-bold text-[#C62828] focus:outline-none placeholder-[#A1887F]" required>
            </div>

            <!-- Method -->
            <div class="flex gap-2">
                <label class="flex-1 cursor-pointer">
                    <input type="radio" name="exp_method" id="exp_method_cash" value="Cash" checked class="peer hidden">
                    <div class="peer-checked:bg-[#2E7D32] peer-checked:text-white peer-checked:border-[#1B5E20] bg-[#FFF8DC] border-2 border-[#D7CCC8] text-[#8D6E63] py-2 rounded text-center text-xs font-bold transition-all font-hand">
                        <i class="fa-solid fa-money-bill-wave mr-1"></i> เงินสด
                    </div>
                </label>
                <label class="flex-1 cursor-pointer">
                    <input type="radio" name="exp_method" value="Transfer" class="peer hidden">
                    <div class="peer-checked:bg-[#1565C0] peer-checked:text-white peer-checked:border-[#0D47A1] bg-[#FFF8DC] border-2 border-[#D7CCC8] text-[#8D6E63] py-2 rounded text-center text-xs font-bold transition-all font-hand">
                        <i class="fa-solid fa-mobile-screen mr-1"></i> โอน
                    </div>
                </label>
            </div>

            <!-- File Upload -->
            <div class="pt-1">
                <label class="block text-[10px] font-bold text-[#8D6E63] mb-1 font-hand">แนบใบเสร็จ (ถ้ามี)</label>
                <input type="file" id="exp_receipt" accept="image/*" class="w-full text-[10px] text-[#8D6E63] file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-[10px] file:bg-[#FFEBEE] file:text-[#C62828]">
            </div>

            <button type="submit" class="w-full bg-[#C62828] hover:bg-[#B71C1C] text-[#FFEBEE] py-2.5 rounded font-bold shadow-md transform active:scale-95 transition-all text-sm font-hand border-b-4 border-[#B71C1C]">
                บันทึกรายจ่าย
            </button>
        </form>
    </div>
</div>